#!nsh
#
# @name 3DR DIY Quad
#
# @type Quadrotor x
#
# @maintainer Geoff
#

sh /etc/init.d/rc.mc_defaults

if [ $AUTOCNF == yes ]
then
	#Vision Computer
	param set SYS_COMPANION 921600

	#Inner Loop
	param set MC_ROLL_TC 0.16
	param set MC_ROLL_P 6.5
	param set MC_ROLLRATE_P 0.14
	param set MC_ROLLRATE_I 0.1
	param set MC_ROLLRATE_D 0.004
	param set MC_ROLLRATE_FF 0.0
	param set MC_ROLLRATE_MAX 20.0

	param set MC_PITCH_TC 0.16
	param set MC_PITCH_P 6.0
	param set MC_PITCHRATE_P 0.14
	param set MC_PITCHRATE_I 0.09
	param set MC_PITCHRATE_D 0.004
	param set MC_PITCHRATE_FF 0.0
	param set MC_PITCHRATE_MAX 20.0

	param set MC_YAW_P 2.8
	param set MC_YAWRATE_P 0.2
	param set MC_YAWRATE_I 0.1
	param set MC_YAWRATE_D 0.0
	param set MC_YAWRATE_FF 0.0
	param set MC_YAWRATE_MAX 10.0
	param set MC_YAWAUTO_MAX 45.0

	#Use Q attitude estimator and LPE
	param set SYS_MC_EST_GROUP 1

	#Q Attitude Estimator
	param set ATT_W_ACC 0.2
	param set ATT_W_MAG 0.0
	param set ATT_W_EXT_HDG 0.9
	param set ATT_W_GYRO_BIAS 0.1
	param set ATT_MAG_DECL 0.0
	param set ATT_MAG_DECL_A 1
	param set ATT_EXT_HDG_M 2
	param set ATT_ACC_COMP 3
	param set ATT_BIAS_MAX 0.05
	param set ATT_VIBE_THRESH 0.2

	#Position Estimator
	LPE_PUB_AGL_Z [89,184] : 0.0000
	LPE_FLW_OFF_Z [90,185] : 0.0000
	LPE_FLW_SCALE [91,186] : 1.3000
	LPE_FLW_GYRO_CMP [92,187] : 1
	LPE_FLW_QMIN [93,188] : 150
	LPE_SNR_Z [94,189] : 0.0500
	LPE_SNR_OFF_Z [95,190] : 0.0000
	LPE_LDR_Z [96,191] : 0.0300
	LPE_LDR_OFF_Z [97,192] : 0.0000
	LPE_ACC_XY [98,193] : 0.0120
	LPE_ACC_Z [99,194] : 0.0200
	LPE_BAR_Z [100,195] : 3.0000
	LPE_GPS_ON [101,196] : 0
	LPE_GPS_DELAY [102,197] : 0.2900
	LPE_GPS_XY [103,198] : 1.0000
	LPE_GPS_Z [104,199] : 3.0000
	LPE_GPS_VXY [105,200] : 0.2500
	LPE_GPS_VZ [106,201] : 0.2500
	LPE_EPH_MAX [107,202] : 3.0000
	LPE_EPV_MAX [108,203] : 5.0000
	LPE_VIS_DELAY [109,204] : 0.1000
	LPE_VIS_XY [110,205] : 0.1000
	LPE_VIS_Z [111,206] : 0.5000
	LPE_VIS_ON [112,207] : 0
	LPE_VIC_P [113,208] : 0.0010
	LPE_VCN_ON [114,209] : 1
	LPE_VCN_P [115,210] : 0.0100
	LPE_VCN_V [116,211] : 0.1000
	LPE_PN_P [117,212] : 0.1000
	LPE_PN_V [118,213] : 0.1000
	LPE_PN_B [119,214] : 0.0010
	LPE_PN_T [120,215] : 0.0010
	LPE_T_MAX_GRADE [121,216] : 1.0000
	LPE_FGYRO_HP [122,217] : 0.0010
	LPE_LAT [123,218] : 53.5270
	LPE_LON [124,219] : -113.5300
	LPE_X_LP [125,220] : 5.0000
	LPE_VXY_PUB [126,221] : 0.3000
	LPE_Z_PUB [127,222] : 1.0000
	LPE_LAND_Z [128,223] : 0.0300

	MPC_THR_MIN [185,280] : 0.2000
	MPC_THR_HOVER [186,281] : 0.5000
	MPC_ALTCTL_DZ [187,282] : 0.1000
	MPC_ALTCTL_DY [188,283] : 0.0000
	MPC_THR_MAX [189,284] : 0.9500
	MPC_MANTHR_MIN [190,285] : 0.0300
	MPC_MANTHR_MAX [191,286] : 0.9000
	MPC_Z_P [192,287] : 1.0000
	MPC_Z_VEL_P [193,288] : 0.2000
	MPC_Z_VEL_I [194,289] : 0.0200
	MPC_Z_VEL_D [195,290] : 0.0000
	MPC_Z_VEL_MAX_UP [196,291] : 3.0000
	MPC_Z_VEL_MAX [197,292] : 3.0000
	MPC_Z_VEL_MAX_DN [198,293] : 3.0000
	MPC_Z_FF [199,294] : 0.3000
	MPC_XY_P [200,295] : 1.0000
	MPC_XY_VEL_P [201,296] : 0.1000
	MPC_XY_VEL_I [202,297] : 0.0200
	MPC_XY_VEL_D [203,298] : 0.0100
	MPC_XY_CRUISE [204,299] : 5.0000
	MPC_XY_VEL_MAX [205,300] : 1.0000
	MPC_XY_FF [206,301] : 0.2000
	MPC_TILTMAX_AIR [207,302] : 45.0000
	MPC_TILTMAX_LND [208,303] : 12.0000
	MPC_LAND_SPEED [209,304] : 0.5000
	MPC_TKO_SPEED [210,305] : 1.5000
	MPC_MAN_R_MAX [211,306] : 35.0000
	MPC_MAN_P_MAX [212,307] : 35.0000
	MPC_MAN_Y_MAX [213,308] : 200.000000
	MPC_HOLD_XY_DZ [214,309] : 0.1000
	MPC_HOLD_MAX_XY [215,310] : 0.8000
	MPC_HOLD_MAX_Z [216,311] : 0.6000
	MPC_VELD_LP [217,312] : 5.0000
	MPC_ACC_HOR_MAX [218,313] : 5.0000
	MPC_ALT_MODE [219,314] : 0
	MPC_MG [220,315] : 0.3000



fi

set MIXER quad_ancl
set PWM_OUT 1234
set PWM_MIN 1100
set PWM_MAX 1950
set GPS no
set USE_AIRSPEED no
set MAVLINK_F vicon
